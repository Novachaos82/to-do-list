(()=>{"use strict";var e={d:(t,d)=>{for(var o in d)e.o(d,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:d[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{m:()=>h});const t=(e,t)=>{let d=[];return{projectData:e,projectName:t,taskArray:d,taskNum:d.length}},d=()=>{localStorage.setItem("projects",JSON.stringify(h))},o=(e,t)=>{const d=document.querySelector(".projects-div"),o=document.createElement("div");o.id="projectTile",o.innerHTML=`<i class="fa-solid fa-list-check"></i>${t}`,o.dataset.project=e,o.classList.add("project");const a=document.createElement("button");a.id="deleteButton",a.classList.add("projectDelBtn"),a.classList.add("fa-solid"),a.classList.add("fa-xmark"),a.dataset.id=e,o.appendChild(a),d.appendChild(o)},a=()=>document.querySelectorAll("[data-project]").length,c=e=>{null!=document.querySelector(".selected")&&document.querySelector(".selected").classList.remove("selected"),e.classList.add("selected"),m().showAddTaskBtn(),0!=h.length&&n(e.getAttribute("data-project"))},s=()=>({showTaskForm:()=>{const e=document.getElementById("taskForm");e.classList.remove("hide"),e.reset()},hideTaskForm:()=>{document.getElementById("taskForm").classList.add("hide")},showFormProject:()=>{const e=document.getElementById("projectForm");e.classList.remove("hide"),document.getElementById("projectInput").focus(),e.reset()},hideFormProject:()=>{document.getElementById("projectForm").classList.add("hide")}}),l=e=>{document.querySelector(".projects-div").replaceChildren(),console.log(" displayProject is called"),e.forEach((e=>{null!=e&&o(e.projectData,e.projectName)}))},n=e=>{console.log(" displayTask is called"),document.querySelector(".tasks").innerHTML="",h[e].taskArray.forEach((e=>{console.log("display task called"),u(e.checkbox,e.title,e.details,e.date,e.id,e.priority)}))},r=e=>{document.querySelector(".title").textContent=e},i=e=>{console.log(`removing  ${e}...`),h.splice(e,1),h.forEach((t=>{t.projectData>e&&(t.projectData-=1)})),m().hideAddTaskButton(),d(),l(h)},m=()=>{const e=document.getElementById("addTask");return{hideAddTaskButton:()=>{e.style.display="none"},showAddTaskBtn:()=>{e.style.display="block"}}},u=(e,t,d,o,a,c)=>{const s=document.querySelector(".tasks"),l=document.createElement("li");l.classList.add("task");const n=document.createElement("div");n.classList.add("checkbox");const r=document.createElement("input");r.id="checkboxID",r.type="checkbox",r.checked=e,n.appendChild(r);const i=document.createElement("div");i.classList.add("list-details");const m=document.createElement("div");m.classList.add("task-title"),m.textContent=""+t,i.appendChild(m);const u=document.createElement("div");u.classList.add("task-details"),u.textContent=d,i.appendChild(u);const p=document.createElement("div");p.classList.add("list-buttons");const g=document.createElement("input");g.type="date",g.value=o,g.readOnly=!0,p.appendChild(g);const h=document.createElement("button");h.id="delete",h.classList.add("fa-solid"),h.classList.add("fa-trash-can"),p.appendChild(h),"low"===c&&l.classList.add("low"),"med"===c&&l.classList.add("med"),"high"===c&&l.classList.add("high"),l.dataset.task=a,l.appendChild(n),l.appendChild(i),l.appendChild(p),s.appendChild(l)},p=()=>h[g()].taskArray.length,g=()=>{const e=document.querySelector(".selected");return console.log(e.dataset.project),e.dataset.project};console.log("test main.js");let h=[];if(localStorage.getItem("projects")){let e=JSON.parse(localStorage.getItem("projects"));console.log(e),h=e,console.log("exist"),l(h)}else{console.log("doesn't exist");let e=t("0","default1");h.push(e),o("0","default1"),l(h)}g(),document.getElementById("addProjectBtn").addEventListener("click",s().showFormProject),document.getElementById("projectCancelBtn").addEventListener("click",s().hideFormProject),document.getElementById("projectSubmitBtn").addEventListener("click",(e=>{e.preventDefault(),console.log(h),(()=>{let e=document.getElementById("projectInput").value,c=a();const l=t(c,e);console.log(c+"each time"),h.push(l),d(),o(c,e),s().hideFormProject()})()})),document.querySelector(".projects-div").addEventListener("click",(e=>{(e=>{let t=e.target.id;"projectTile"!==t&&"allTask"!==t&&"today"!==t&&"sevenDays"!==t||(c(e.target),r(e.target.textContent)),"deleteButton"===t&&(console.log(e.target.parentNode.getAttribute("data-project")+"checking the delete button id"),i(e.target.getAttribute("data-id")))})(e)})),document.getElementById("addTask").addEventListener("click",s().showTaskForm),document.getElementById("taskCancelBtn").addEventListener("click",s().hideTaskForm),document.getElementById("taskSubmitBtn").addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.getElementById("taskTitle").value,t=document.getElementById("taskDetails").value,o=document.getElementById("Date").value,a=g(),c=p(),l=document.getElementById("priority").value,n=((e,t,d,o,a,c)=>({checkbox:!1,title:e,details:t,date:d,id:o,priority:a,projectID:c}))(e,t,o,c,l,a);h[a].taskArray.push(n),d(),u(!1,e,t,o,c,l),s().hideTaskForm()})(),console.log(h[g()].taskArray)})),document.querySelector(".tasks").addEventListener("click",(e=>{(e=>{var t,o;"delete"===e.target.id&&(console.log(g(),e.target.parentNode.parentNode.getAttribute("data-task")+"checkeventDelete"),t=g(),o=e.target.parentNode.parentNode.getAttribute("data-task"),console.log("delete task function"),h[t].taskArray.splice(o,1),h[t].taskArray.forEach((e=>{e.id>o&&(e.id-=1)})),d(),n(t))})(e)}))})();